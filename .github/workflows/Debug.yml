# .github/workflows/debug-test.yml
name: Debug File Rename

on:
  workflow_dispatch:
    inputs:
      filename:
        description: 'Base name'
        required: true
        default: 'TestApp'
        type: string

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: üß™ Create mock exe
        run: |
          mkdir -p SignOutput
          echo "fake binary" > SignOutput/rustdesk.exe

      - name: Set filename
        run: |
          NAME="${{ inputs.filename }}-default-abc123"
          echo "BUILD_FILENAME=$NAME" >> $GITHUB_ENV
          echo "Using: $NAME"

      - name: Rename
        run: |
          mv SignOutput/rustdesk.exe "SignOutput/${BUILD_FILENAME}.exe"
          ls -la SignOutput/

      - name: Confirm file exists
        run: |
          if [ -f "SignOutput/${BUILD_FILENAME}.exe" ]; then
            echo "‚úÖ Success!"
          else
            echo "‚ùå Failed!"
            exit 1
          fi
